function capitalizeFirstLetter(a){return a.charAt(0).toUpperCase()+a.slice(1)}function checkAccountForm(){var a={};return $.each($("#formAccount").serializeArray(),function(b,c){a[c.name]=c.value}),a.password==a.confirm_password&&($.ajax({type:"POST",url:"/ajax_createaccount",data:{anz_num:a.anz_num,club:a.club,password:a.password,confirm_password:a.confirm_password,email:a.email,first_name:a.first_name,last_name:a.last_name,prefered_type:a.prefered_type,gender:a.gender},success:function(a){var b=$.parseJSON(a);"failed"==b.status?alert(b.message):(alert("Profile created"),location.reload())}}),!1)}function checkProfileForm(){var a={};return $.each($("#formProfile").serializeArray(),function(b,c){a[c.name]=c.value}),a.password==a.confirm_password&&($.ajax({type:"POST",url:"/ajax_createprofile",data:{anz_num:a.anz_num,email:a.email,first_name:a.first_name,last_name:a.last_name,prefered_type:a.prefered_type,gender:a.gender},success:function(a){var b=$.parseJSON(a);"failed"==b.status?alert(b.message):(alert("Profile created"),location.reload())}}),!1)}function checkLogin(){var a={};return $.each($("#loginForm").serializeArray(),function(b,c){a[c.name]=c.value}),""==a.password||""==a.email?(alert("Please check details and try again"),!1):($.ajax({type:"POST",url:"/ajaxCheckLogin",data:{password:a.password,email:a.email},success:function(a){var b=$.parseJSON(a);"failed"==b.status?alert(b.message):window.location.href="/week?week="+b.week}}),!1)}function checkProfileUpdate(){var a={};return $.each($("#userprofileform").serializeArray(),function(b,c){a[c.name]=c.value}),a.password==a.confirm_password&&($.ajax({type:"POST",url:"/ajaxUpdateProfile",data:{address:a.address,anz_num:a.anz_num,club:a.club,phone:a.phone,password:a.password,confirm_password:a.confirm_password,email:a.email,first_name:a.first_name,last_name:a.last_name,prefered_type:a.prefered_type,gender:a.gender},success:function(a){var b=$.parseJSON(a);"failed"==b.status?alert(b.message):(alert("Profile updated"),location.reload())}}),!1)}$(document).ready(function(){function b(a,b){"Hide"==$(b).val()?$(b).prop("value","Show"):$(b).prop("value","Hide"),$(a).toggleClass("hidden")}function c(a,b){"Hide"==$(b).val()?$(b).prop("value","Scoring"):$(b).prop("value","Hide"),$(a).toggleClass("hidden")}var a=$("#spinning").hide();$(document).ajaxStart(function(){a.show()}).ajaxStop(function(){a.hide()}),$("#addArcherButton").prop("disabled",!0),$("#correctScores").change(function(){$("#correctScores").is(" :checked")?$("#submit").prop("disabled",!1):$("#submit").prop("disabled",!0)}),$("#archeryselect").ready(function(){var a=window.location.href,c=(a.split("?"),a.split("/"));if("overall"==c[3])$("#archeryselect").selectpicker("val",c[3]);else if("myscores"==c[3])$("#archeryselect").selectpicker("val",c[3]);else if("week"!=c[3]||isNaN(c[4])){var e=$("#selectedWeek").text();console.log(e),$("#archeryselect").selectpicker("val",e)}else{var d=$("#currentWeek").text();$("#archeryselect").selectpicker("val",d)}}),$("#archeryselect").on("change",function(){var a=$("#archeryselect").children("option").filter(":selected").val();if("overall"==a)window.location="/overall";else if("myscores"==a)window.location="/myscores";else{var b="week?"+a;b?window.location=b:window.location="/myscoers"}}),$("#overallSelector").on("change",function(){var a=$("#overallSelector").children("option").filter(":selected").val();console.log(a),$.ajax({type:"POST",url:"/ajax_viewOverall",data:{division:a},success:function(a){var b=$.parseJSON(a);if("failed"==b.status)alert("Please try again later"),location.reload();else{var c="#tableAverages tbody",d="#tablePoints tbody";$(c).empty(),$(d).empty();var e=b.averages,f=b.points,g=1;$(e).each(function(){$(c).append("<tr><td> "+g+"</td><td> "+capitalizeFirstLetter(this.first_name)+" "+capitalizeFirstLetter(this.last_name)+"</td><td> "+this.average_score+"</td><td> "+this.average_x+"</td></tr>"),g++}),g=1,$(f).each(function(){$(d).append("<tr><td> "+g+"</td><td> "+capitalizeFirstLetter(this.first_name)+" "+capitalizeFirstLetter(this.last_name)+"</td><td> "+this.top_ten_points+"</td></tr>"),g++})}}})}),$("#pendingbutton").ready(function(){$("#pendingbutton").on("click",function(){b("#pendingusers","#pendingbutton")})}),$("#phone").on("change",function(){var a=$(this).val();reg=/^[0-9]+$/,$("#valid_phone").remove(),reg.test(a)||$("#phone").parent().after("<div id='valid_phone' style='color:red;'>Numbers only</div>")}),$("#profileformbutton").ready(function(){$("#profileformbutton").on("click",function(){b("#userprofileform","#profileformbutton")})}),$("#openScoring").ready(function(){$("#openScoring").on("click",function(){c("#scoringTable","#openScoring")})}),$("#searcharcher").on("keyup",function(){var a=$(this).val();$.get("/ajax_searchAnzArcher?anz_num="+a,function(a){"failed"==a.status?($("#validation").remove(),$('<p id="validation" style="color: red; margin-left: 14px">Not Found</p>').insertAfter($("div.validation")),$("#addArcherButton").prop("disabled",!0)):"success"==a.status&&($("#validation").remove(),$('<p id="validation" style="color: green; margin-left: 14px">Found</p>').insertAfter($("div.validation")),$("#addArcherButton").prop("disabled",!1))})}),$("#addArcherButton").on("click",function(){var a=$("#searcharcher").val();$.ajax({type:"POST",url:"/ajax_addTempUser",data:{anz_num:a},success:function(a){var b=$.parseJSON(a);"failed"==b.status?alert("Cannot add account"):location.reload()}})}),$("#submit").on("click",function(){function b(a){return!isNaN(a)&&!(a>360||a<0)}function c(a){return!isNaN(a)&&!(a>36||a<0)}$("tr.archer").each(function(){$("#invalidScore").remove(),$("#invalidXCount").remove(),$("#hasscore").remove()});var a=[];$("tr.archer").each(function(){$this=$(this);var d=$this.find("span.name").html(),e=$this.find("input#anz_num").val(),f=$this.find("input#score").val();if(""!=f&&!b(f))return void $('<p id="invalidScore" style="color: red">Invalid Score</p>').insertAfter($($this.find("input#score")));var g=$this.find("input#xcount").val();if(""!=g&&!c(g))return void $('<p id="invalidXCount" style="color: red">Invalid XCount</p>').insertAfter($($this.find("input#xcount")));if(""!=f||""!=g){var h=$this.find("select#div").val(),i=$this.find("span.week").html(),j={name:d,anz:e,score:f,xcount:g,div:h,week:i};$.ajax({type:"POST",url:"/ajax_submitScore",data:{archer:j},success:function(b){var c=$.parseJSON(b);if("failed"==c.status)$("tr.archer").each(function(){$this=$(this);var b=$this.find("span.name").html();b==j.name&&(a.push(b),$('<p id="hasscore" style="color: red">Score already entered</p>').insertAfter($($this.find("span.name")))),$("#correctScores").prop("checked",!1)});else{$("tr.archer").each(function(){$this=$(this);var a=$this.find("span.name").html();$this.find("select#div").val(),$this.find("input#score").val(""),$this.find("input#xcount").val("");if(a==j.name)return $('<p id="invalidXCount" style="color: green">Score Updated</p>').insertAfter($($this.find("span.name"))),!1}),"recurve barebow"==h&&(h="recurvebb");var e="#table-"+h+" tbody";$(e).empty();var f=c.allScores,g=1;$(f).each(function(){$(e).append("<tr><td> "+g+"</td><td> "+capitalizeFirstLetter(this.first_name)+" "+capitalizeFirstLetter(this.last_name)+"</td><td> "+this.score+"</td><td> "+this.xcount+"</td><td> "+this.average_score+"</td><td> "+this.handicap_score+"</td><td>0</td></tr>"),g++})}}})}})}),$("#anz_num").on("focusout",function(){var a=$("#anz_num").val();reg=/^[0-9]+$/,$("#validation_anz").length>0&&$("#validation_anz").remove(),""!=a&&(reg.test(a)?$("#registerAccount").prop("disabled",!1):($("#anz_num").parent().after("<div id='validation_anz' style='color:red;'>Please enter a valid ANZ Number</div>"),$("#registerAccount").prop("disabled",!0)))}),$("#confirm_password").on("focusout",function(){var a=$("#password").val(),b=$("#confirm_password").val();$("#validation_password").length>0&&$("#validation_password").remove(),null!=a&&null!=b&&(a!=b?($("#confirm_password").parent().after("<div id='validation_password' style='color:red;'>Passwords do not match</div>"),$("#registerAccount").prop("disabled",!0),$("#updateProfile").prop("disabled",!0)):($("#registerAccount").prop("disabled",!1),$("#updateProfile").prop("disabled",!1)))})});